@tailwind base;
@tailwind components;
@tailwind utilities;

* {
  -webkit-tap-highlight-color: transparent;
}

html {
  scroll-behavior: smooth;
  overflow-x: hidden;
}

body {
  @apply font-arabic antialiased overflow-x-hidden;
  background-color: #0a0a0a;
  color: #fafafa;
}

/* موبايل: منع السكرول الأفقي فقط — العمودي مسموح لرؤية الدائرة والأزرار كاملة */
@media (max-width: 640px) {
  html {
    min-height: 100dvh;
    min-height: -webkit-fill-available;
  }
  body {
    min-height: 100dvh;
    min-height: -webkit-fill-available;
    overflow-x: hidden;
  }
  #root {
    min-height: 100dvh;
    overflow-x: hidden;
  }
}

.safe-area-pb {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

.safe-area-insets {
  padding-top: env(safe-area-inset-top, 0);
  padding-bottom: env(safe-area-inset-bottom, 0);
  padding-left: env(safe-area-inset-left, 0);
  padding-right: env(safe-area-inset-right, 0);
}

body {
  overscroll-behavior-y: none;
}


.min-h-screen-dvh {
  min-height: 100vh;
  min-height: 100dvh;
}

/* خلفية صفحة الضيف — لون بيج مع نقش أنعم شبيه بالجلد/الرق */
.page-bg-leather {
  background-color: #d9c9a8;
  position: relative;
}
.page-bg-leather::before {
  content: '';
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background-image:
    repeating-linear-gradient(
      180deg,
      transparent 0,
      transparent 1px,
      rgba(0,0,0,0.018) 1px,
      rgba(0,0,0,0.018) 2px
    ),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.04' numOctaves='5' result='n'/%3E%3CfeColorMatrix in='n' type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23g)' fill='none'/%3E%3C/svg%3E");
  background-size: auto, 160px 160px;
  opacity: 0.26;
  mix-blend-mode: multiply;
}

/* أولوية الجوال: منع التكبير التلقائي عند focus (iOS يكبّر لو font-size < 16px) */
.input-mobile-safe {
  font-size: max(1rem, 16px);
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in {
  animation: fade-in 0.35s ease-out forwards;
}

@keyframes wheel-btn-pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 3px 12px rgba(0,0,0,0.3), inset 0 2px 0 rgba(255,255,255,0.3), inset 0 -1px 0 rgba(0,0,0,0.2);
  }
  50% {
    transform: scale(1.06);
    box-shadow: 0 6px 20px rgba(212,175,55,0.5), 0 0 24px rgba(232,197,71,0.35), inset 0 2px 0 rgba(255,255,255,0.4), inset 0 -1px 0 rgba(0,0,0,0.2);
  }
}
.animate-wheel-btn-pulse {
  animation: wheel-btn-pulse 0.85s ease-in-out infinite;
}

@keyframes celebrate-pop {
  0% {
    opacity: 0;
    transform: scale(0.88) translateY(12px);
  }
  60% {
    opacity: 1;
    transform: scale(1.03) translateY(-4px);
  }
  85% {
    transform: scale(0.98) translateY(1px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.animate-celebrate-pop {
  animation: celebrate-pop 0.55s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes confetti-fall {
  0% {
    opacity: 1;
    transform: translateY(-20px) rotate(0deg) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(120px) rotate(720deg) scale(0.6);
  }
}

@keyframes shimmer-border {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.animate-confetti-fall {
  animation: confetti-fall 2.2s ease-out forwards;
  pointer-events: none;
}

/* رسالة "محاولة واحدة" — دخول ناعم + توهج ذهبي خفيف */
@keyframes one-try-entrance {
  0% {
    opacity: 0;
    transform: scale(0.92) translateY(10px);
  }
  70% {
    opacity: 1;
    transform: scale(1.02) translateY(-2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}
@keyframes one-try-glow {
  0%, 100% {
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
  }
  50% {
    box-shadow: 0 4px 20px rgba(212,175,55,0.22), 0 2px 12px rgba(0,0,0,0.08);
  }
}
.animate-one-try-message {
  animation:
    one-try-entrance 0.5s cubic-bezier(0.34, 1.2, 0.64, 1) forwards,
    one-try-glow 2.8s ease-in-out 0.6s infinite;
}

/* العجلة — توهج نابض + أشعة ذهبية */
/* شريط تحميل غير محدد — للملفات */
@keyframes upload-bar-shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}
.animate-upload-bar {
  overflow: hidden;
  position: relative;
}
.animate-upload-bar::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255,255,255,0.25) 50%,
    transparent 100%
  );
  width: 50%;
  animation: upload-bar-shimmer 1.5s ease-in-out infinite;
}

@keyframes wheel-glow {
  0%, 100% {
    box-shadow:
      0 4px 20px rgba(0,0,0,0.12),
      0 0 30px rgba(212,175,55,0.15),
      0 0 50px rgba(232,197,71,0.08);
  }
  50% {
    box-shadow:
      0 6px 24px rgba(0,0,0,0.14),
      0 0 40px rgba(212,175,55,0.28),
      0 0 70px rgba(232,197,71,0.15);
  }
}
@keyframes wheel-rays-rotate {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}
.wheel-glow {
  animation: wheel-glow 3s ease-in-out infinite;
}
.wheel-rays {
  animation: wheel-rays-rotate 20s linear infinite;
}

/* طباعة QR — مقاس A4 مباشر */
@page {
  size: A4 portrait;
  margin: 12mm;
}

@media print {
  body * {
    visibility: hidden;
  }
  #print-qr-card,
  #print-qr-card * {
    visibility: visible;
  }
  #print-qr-card {
    position: fixed !important;
    left: 0 !important;
    top: 0 !important;
    width: 100% !important;
    height: 100% !important;
    min-height: 297mm !important;
    margin: 0 !important;
    padding: 0 !important;
    background: white !important;
    display: flex !important;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    page-break-after: avoid;
  }
  #print-qr-card #qr-container {
    padding: 2rem !important;
  }
  #print-qr-card #qr-container svg {
    width: 100mm !important;
    height: 100mm !important;
  }
}

/* إخفاء مؤشر الزيادة/النقصان في حقل الرقم */
.input-no-spinner::-webkit-outer-spin-button,
.input-no-spinner::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.input-no-spinner {
  -moz-appearance: textfield;
}
